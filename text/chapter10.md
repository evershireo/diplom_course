# Базы данных

DevOps-инженеры часто занимаются автоматизацией процессов развертывания приложений, которые взаимодействуют с базами данных. Понимание различных типов баз данных и их работы помогает более эффективно управлять этими процессами и избегать ошибок при интеграции.

Умение работать с инструментами мониторинга баз данных помогает в выявлении узких мест и оптимизации производительности. DevOps-инженеры должны уметь анализировать метрики, такие как потребление ресурсов, время отклика и журналирование запросов, чтобы обеспечивать бесперебойную работу приложений.

 Часто DevOps-инженеры отвечают за автоматизацию процессов резервного копирования и восстановления данных. Глубокое понимание баз данных позволяет разработать более надежные и эффективные стратегии для защиты данных.

DevOps-инженеры должны обеспечивать безопасность данных, хранящихся в базах данных. Это включает управление доступом, внедрение мер безопасности и соответствие стандартам и нормативным требованиям.

С переходом многих организаций на микро-сервисную архитектуру роль баз данных стала еще более важной. DevOps-инженеры должны знать, как настраивать и управлять распределенными базами данных, которые могут быть частью такого архитектурного подхода.

Таким образом, глубокое понимание баз данных позволяет DevOps-инженерам более эффективно выполнять свою работу, обеспечивая надежность, производительность и безопасность систем, которыми они управляют.

## Релиционные базы данных

Реляционные базы данных (РБД) — это вид баз данных, который использует структуру, основанную на таблицах (отношениях) для хранения и управления данными. Данные в реляционных базах данных организуются в таблицы, которые могут связываться друг с другом через ключи. Это позволяет эффективно манипулировать данными, обеспечивая целостность, согласованность и независимость от приложений.

У реляционной базы данных 2 очень важные характеристики:

1. Данные распределены по смыслу по таблицам
2. Между таблицами есть отношения

Для взаимодействия с реляционными базами данных чаще всего используется SQL (Structured QueryLanguage). Это специальный язык программирования, на котором пишутся запросы к реляционной базе. SQL-запросами можно создавать и удалять таблицы в реляционной базе, изменять данные в существующих таблицах и доставать из таблиц необходимую информацию.

Одним из наиболее эффективных методов повышения скорости обработки запросов к реляционным базам данных является индексирование таблиц. Индекс представляет собой специфический столбец в таблице, по которому осуществляется поиск информации.

Рассмотрим пример использования индекса. Предположим, необходимо найти все заказы от клиента с идентификатором 007, сделанные в ресторане 1. В случае отсутствия индекса в таблице заказов, система будет вынуждена просматривать все записи до тех пор, пока не окажется найденной нужная информация. Однако, при наличии индекса в таблице заказов ситуация значительно улучшается. Предполагая, что в качестве индекса использован столбец с идентификатором ресторана, данные в таблице будут организованы по значению данного столбца. Таким образом, при поиске заказов клиента 007 из ресторана 1, система сможет сразу перейти к выборке заказов, относящихся к ресторану 1, и произвести дальнейший поиск лишь внутри указанной группы данных.

Из примера выше с индексом выше понятно, что индексом удобно выбирать такой столбец, в разрезе которого часто ищутся данные.

Одной из ключевых характеристик реляционных баз данных является соответствие принципам ACID. Без углубления в детали, следует отметить, что эти принципы обеспечивают целостность и корректность данных, даже при возникновении ошибок, системных сбоев, перебоях в электропитании, одновременных изменениях данных несколькими пользователями и других нестандартных ситуациях.

На первый взгляд, реляционная база данных может показаться идеальной, вызывая вопрос о целесообразности её повсеместного применения. Однако, у данного типа баз данных имеются и свои недостатки, которые иногда делают его непригодным для решения определённых бизнес-задач. В частности, реляционные базы данных неэффективны при работе с неструктурированными данными, так как такие данные сложно классифицировать и распределить по отдельным таблицам. Следует подчеркнуть, что в современном мире доля неструктурированных данных значительно превышает объём данных с чётко определённой структурой.

PostgreSQL — это мощная и популярная система управления реляционными базами данных с открытым исходным кодом. Она поддерживает стандарт SQL и представляет собой одну из наиболее продвинутых открытых СУБД. Давайте более подробно рассмотрим особенности и возможности PostgreSQL на примере.

PostgreSQL полностью поддерживает SQL и расширяет его собственными возможностями, такими как оператор JSON, собственные функции и расширения.

Кроме того, PostgreSQL позволяет пользователям добавлять новые функциональные возможности, такие как типы данных, операторы и функции. Это достигается через мощную систему расширений.

PostgreSQL обеспечивает строгую целостность данных с помощью транзакций ACID (атомарность, согласованность, изоляция, долговечность), триггеров и ограничений.

Ниже приведен ряд примеров по работе с PostgreSQL при помощи SQL.

```sql
<--Создание базы данных-->
CREATE DATABASE mydatabase;
```

```sql
<--Создание таблицы с пользователями-->
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

```sql
<--Добавление данных в таблицу-->
INSERT INTO users (username, email) VALUES ('johndoe', 'johndoe@example.com');
```

```sql
<--Получение данных из таблицы-->
SELECT * FROM users WHERE email = 'johndoe@example.com';
```

```sql
<--Обновление данных в таблице-->
UPDATE users SET email = 'john.doe@example.com' WHERE user_id = 1;
```

```sql
<--Удаление данных из таблицы-->
DELETE FROM users WHERE user_id = 1;
```

## Нереляционные базы данных

Разнообразные типы баз данных, отличные от реляционных, чаще всего классифицируются как базы данных noSQL. Рассмотрим наиболее распространенные виды нереляционных баз данных.

### Базы данных типа "ключ-значение" (например, Redis)

Само название данного типа баз данных указывает на удобный способ организации данных в формате пар "ключ-значение". Основное преимущество таких систем заключается в высокой скорости поиска значения по заданному ключу, где значение может представлять собой данные любого типа. Подобные базы данных особенно эффективны в проектах, где требуется обеспечить быструю доставку результатов по ключу, таких как онлайн-торговля или транзакции.

### Документно-ориентированные базы данных (например, MongoDB)

В документно-ориентированных базах данных основной единицей хранения является документ, который может быть представлен в формате JSON, XML и других форматах. Преимущества использования таких баз данных заключаются в упрощенной и быстрой записи различных типов данных, которые не требуют строгой структуры. Недостатком же является сложность анализа данных. В моей предыдущей компании такой тип баз данных использовался в качестве промежуточного хранилища для реляционных баз данных. Первоначально все данные сохранялись в документно-ориентированной базе, после чего команда инженеров по данным обрабатывала их, структурировала и переносила в реляционную базу данных для последующего использования аналитиками и специалистами по Data Science.

### Графовые базы данных (например, OrientDB)

Как следует из названия, в графовых базах данных информация хранится в виде графов. Данный тип баз данных удобен, когда требуется не только извлечение информации об отдельном объекте, но и изучение его связей с другими объектами. Например, в моей текущей компании графовые базы данных применяются для поиска куки отдельного пользователя и всех идентификаторов, связанных с этой куки. Подобные базы данных также часто используются социальными сетями для хранения информации не только о пользователях, но и об их взаимодействиях с другими пользователями.

### Колоночные (столбцовые) базы данных (например, Cassandra, ClickHouse)

В отличие от реляционных баз данных, где данные хранятся в виде строк, колоночные базы данных организуют данные в виде столбцов. Это позволяет осуществлять поиск данных без необходимости перебора всех строк, как в реляционной базе, а через выборку значений непосредственно в интересующих столбцах. Преимущество колоночных баз данных заключается в их способности быстро находить конкретные значения в заданных столбцах, что повышает эффективность обработки больших объемов данных.
