# Компьютерные сети

В современном мире невозможно представить нашу жизнь без интернета, электронной почты, социальных сетей и множества других услуг, которые связывают нас друг с другом и с огромным количеством информации. Все эти возможности стали доступными благодаря компьютерным сетям — сложным системам, которые обеспечивают обмен данными между различными устройствами, будь то компьютеры, смартфоны или дата-центры.

![alt text](/images/chapter5/image.png)

## Сети - проблема сетевика, зачем они DevOps инженеру?

Одной из наиболее частых задач для DevOps инженера является поиск и устранение неисправностей в работающем приложении. Для эффективного устранения неисправностей необходимо хорошо понимать, как работают компьютерные сети и где могут создаваться узкие места. Кроме того, знания в области компьютерных сетей необходимы для организации эффективного взаимодействия в больших контейнерных средах. Кроме того, понимания компьютерных сетей требуют задачи мониторинга и сетевой безопасности

Современному DevOps инженеру необходимо уметь обращаться с такими инструментами как Wireshark, tcpdump, netcat, а также понимать принципы работы таких протоколов, как DNS, SNMP, HTTP и HTTPS, SMTP и так далее.

## Как работает компьютерная сеть?

Современные компьютерные сети чаще всего работают по протоколам IP, либо IPv6. Вышеперечисленные протоколы, в свою очередь, соответствуют модели OSI.

Модель OSI (Open Systems Interconnection) — это концептуальная структура, которая описывает процесс передачи данных в сети. Она состоит из семи уровней, каждый из которых отвечает за определенный аспект сетевого взаимодействия. Представим модель OSI как здание из семи этажей:

1. Физический уровень (Physical Layer):
   Это основание здания. Здесь происходит передача реальных сигналов по проводам, оптоволокну или в воздухе (в случае беспроводной связи). Пример: электрические сигналы по медным проводам или световые импульсы по оптоволокну.

2. Канальный уровень (Data Link Layer):
   На этом этаже добавляются «лифты», которые обеспечивают надежную и эффективную доставку данных между узлами в одной и той же сети. Основные задачи: управление доступом к среде передачи и обнаружение ошибок. Пример: ваш Wi-Fi адаптер организует связь с домашним маршрутизатором.

3. Сетевой уровень (Network Layer):
   Тут вы начинаете путешествие между различными зданиями или сетями. Этот уровень отвечает за маршрутизацию данных от отправителя к получателю. Пример: IP-адресация и маршрутизаторы, которые направляют данные между городами в Интернете.

4. Транспортный уровень (Transport Layer):
   Представьте, что это курьерская служба, которая заботится о том, чтобы ваши посылки (данные) были доставлены в целости и сохранности. Пример: протокол TCP, который обеспечивает надежную передачу данных с подтверждением доставки.

5. Сеансовый уровень (Session Layer):
   Это координатор встреч или сессий между приложениями на разных устройствах. Он управляет началом, поддержанием и завершением взаимодействий. Пример: Видеозвонки, которые устанавливают сессию для передачи аудио и видео между пользователями.

6. Представительский уровень (Presentation Layer):
   Этот этаж — переводчик и кодировщик всего здания. Он отвечает за преобразование данных в нужный формат для приложения. Пример: сжатие данных или шифрование информации для безопасной передачи.

7. Прикладной уровень (Application Layer):
   Это верхний этаж, где вы, как пользователь, взаимодействуете с приложениями. Этот уровень предоставляет сетевые службы конечным пользователям. Пример: веб-браузеры, почтовые клиенты, которые используют сетевые ресурсы для выполнения задачи.

## Сетевые протоколы

Кроме понимания прицнипов работы сети, необходимо понимать, как работает ряд прикладных протоколов.

HTTP/HTTPS (HyperText Transfer Protocol/Secure):

* Используется для передачи гипертекста в сети, чаще всего для доступа к веб-страницам. HTTPS обеспечивает защищенную передачу данных благодаря шифрованию.
* Веб-приложения и API обычно используют эти протоколы. DevOps инженер должен уметь настраивать и оптимизировать веб-сервисы и обеспечивать их безопасность.

SSH (Secure Shell):

* Протокол для безопасного удаленного доступа к серверам и устройствам.
* Дает возможность безопасно управлять инфраструктурой и автоматизировать процессы через удаленные соединения.

DNS (Domain Name System):

* Преобразует доменные имена в IP-адреса.
* Умение управлять DNS записями и понимать, как они влияют на доступность и маршрутизацию приложений, крайне важно.

TCP/IP (Transmission Control Protocol/Internet Protocol):

* Основной сетевой протокол, который определяет, как данные передаются между устройствами в сети.
* Основы сетевой коммуникации; понимание работы TCP/IP критично для диагностики сети и оптимизации работы приложений и сервисов.

UDP (User Datagram Protocol):

* Протокол, использующий более простой механизм передачи данных без гарантии доставки.
* Используется в приложениях, где важна скорость, а не безопасность доставки, таких как стриминг или онлайн-игры.

SMTP (Simple Mail Transfer Protocol):

* Протокол для отправки электронной почты.
* Управление и интеграция приложений с почтовым сервисом для уведомлений и рассылок.

SNMP (Simple Network Management Protocol):

* Протокол для управления сетевыми устройствами и мониторинга их состояния.
* Для настройки мониторинга и получения данных о состоянии сетевых устройств в инфраструктуре.

HTTP/2 и HTTP/3:

* Улучшенные версии протокола HTTP, которые предлагают более высокую производительность и эффективность.
* Для оптимизации производительности веб-служб и приложений.

## Хорошо, а как с контейнерами?

В контейнерных средах обычно используются следующие типы сетей:

* Bridge (мост) – это частная внутренняя сеть Docker по умолчанию. Контейнеры, подключенные к одной и той же bridge-сети, могут обмениваться данными между собой. Однако такие контейнеры изолированы от внешнего мира, если явно не настроены правила NAT (трансляция сетевых адресов).
* Host – позволяет контейнеру использовать сетевой стек хоста, что может снизить изоляцию, но даст контейнеру прямой доступ к локальной сети хоста.
* None – отключает сетевые функции. Это позволяет работать в полностью изолированной сети.
* Overlay – используется для создания сетей, которые охватывают несколько Docker сущностей (например, в Docker Swarm). Это облегчает подключение контейнеров на разных хостах.
* Macvlan – создает уникальные MAC-адреса для контейнеров, позволяя им напрямую взаимодействовать с физической сетью.
